{% extends "base.html" %}
{% block content %}
<h1 style="padding-left: 20px;">Classification Mode</h1>
<div class="image-grid">
    {% for image in images %}
    <div class="image-item">
        <img src="{{ url_for('send_image', mode='classify', filename=image) }}" alt="{{ image }}" onclick="openModal('{{ image }}')">
        <p>{{ image }}</p>
    </div>
    {% endfor %}
</div>

<!-- Modal -->
<div id="myModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <div class="modal-content">
        <img id="modalImage" src="" alt="Enlarged Image">
        <div class="modal-buttons">
            <form method="post" action="" id="preyForm">
                <button type="submit">Prey</button>
            </form>
            <form method="post" action="" id="noPreyForm">
                <button type="submit">No Prey</button>
            </form>
        </div>
    </div>
</div>

<script>
    function openModal(filename) {
        var modal = document.getElementById("myModal");
        var modalImg = document.getElementById("modalImage");
        var preyForm = document.getElementById("preyForm");
        var noPreyForm = document.getElementById("noPreyForm");

        modal.style.display = "block";
        modalImg.src = "{{ url_for('send_image', mode='classify', filename='') }}" + filename;
        preyForm.action = "{{ url_for('classify_image', action='prey', filename='') }}" + filename;
        noPreyForm.action = "{{ url_for('classify_image', action='no_prey', filename='') }}" + filename;
    }

    function closeModal() {
        var modal = document.getElementById("myModal");
        modal.style.display = "none";
    }

    // Close modal when clicking outside of the modal content
    window.onclick = function(event) {
        var modal = document.getElementById("myModal");
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
{% endblock %}
